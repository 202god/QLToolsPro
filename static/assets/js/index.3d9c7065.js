import{z as G,r as N,N as X,o as D,n as O,w as t,b as e,D as Z,q as F,g as s,m as T,l as d,ak as te,al as ae,e as k,X as le,S as ne,d as oe,c as P,F as R,Z as B,a3 as se,am as de,p as z,an as ie,ao as re,ap as ue,aq as _e,ar as ce}from"./index.c6516d62.js";import{p as H}from"./p-center-modal.bb6cca38.js";import{_ as pe}from"./page-container.9c5635db.js";import{d as L}from"./common.15b1556d.js";import{S as me}from"./SyncOutlined.74d523b0.js";import"./_plugin-vue_export-helper.5059d46b.js";import"./store.f76b099d.js";const ye=s("\u53D6\u6D88"),fe=s("\u63D0\u4EA4"),ve={__name:"editOrAdd",props:{dataObj:Object,visible:Boolean},emits:["update:visible","updateData"],setup(V,{emit:g}){const S=V,{visible:f,dataObj:r}=G(S),b=()=>{g("update:visible",!1)},a=N({state:!1,cd_key_remarks:""}),h={state:[{required:!0,trigger:"change"}],cd_key_remarks:[{required:!0,trigger:"change"}]},C=c=>{console.log(c)},_=(...c)=>{console.log(c)},$={labelCol:{span:7},wrapperCol:{span:15}},E=c=>{const l={...a};let y=null;r.value.ID&&(l.id=r.value.ID,y=te),y({data:l}).then(()=>{T.success("\u64CD\u4F5C\u6210\u529F"),g("updateData",l),b()})};X(f,(c,l,y)=>{f.value&&M()});const M=()=>{r.value.ID?(a.state=r.value.CdKeyState,a.cd_key_remarks=r.value.CdKeyRemarks):(a.state=!1,a.cd_key_remarks="")};return(c,l)=>{const y=d("a-switch"),p=d("a-form-item"),m=d("a-input"),U=d("a-divider"),w=d("a-button"),v=d("a-form");return D(),O(H,{modalVisible:F(f),isFooter:!1,onClose:b,title:F(r).title},{content:t(()=>[e(v,Z({ref:"formRef",name:"custom-validation",model:a,rules:h},$,{onValidate:_,onFinishFailed:C,onFinish:E}),{default:t(()=>[e(p,{label:"CD-KEY\u72B6\u6001",name:"state"},{default:t(()=>[e(y,{checked:a.state,"onUpdate:checked":l[0]||(l[0]=x=>a.state=x),"checked-children":"\u5F00\u542F","un-checked-children":"\u5173\u95ED"},null,8,["checked"])]),_:1}),e(p,{label:"CD-KEY\u6807\u8BC6",name:"cd_key_remarks"},{default:t(()=>[e(m,{value:a.cd_key_remarks,"onUpdate:value":l[1]||(l[1]=x=>a.cd_key_remarks=x)},null,8,["value"])]),_:1}),e(U),e(p,{"wrapper-col":{span:12,offset:12},class:"timed-start-button"},{default:t(()=>[e(w,{onClick:b},{default:t(()=>[ye]),_:1}),e(w,{type:"primary",style:{"margin-left":"20px"},"html-type":"submit"},{default:t(()=>[fe]),_:1})]),_:1})]),_:1},16,["model"])]),_:1},8,["modalVisible","title"])}}};const ke=s("\u79EF\u5206"),ge=s("\u4F1A\u5458"),be=s("\u5929\u5361"),he=s("\u5468\u5361"),Ce=s("\u4E24\u5468\u5361"),xe=s("\u6708\u5361"),De=s("\u5B63\u5EA6"),Se=s("\u534A\u5E74"),we=s("\u4E00\u5E74"),Fe=s("\u53D6\u6D88"),Ue=s("\u63D0\u4EA4"),Ke={__name:"generateCardSecret",props:{dataObj:Object,visible:Boolean},emits:["update:visible","updateData"],setup(V,{emit:g}){const S=V,{visible:f,dataObj:r}=G(S),b=()=>{g("update:visible",!1)},a=N({cd_key_count:"1",cd_key_type:"integral",cd_key_integral:"",cd_key_validity_period:"",cd_key_prefix:"",cd_key_remarks:""}),h={cd_key_count:[{required:!0,trigger:"change"}],cd_key_type:[{required:!0,trigger:"change"}]},C=c=>{console.log(c)},_=(...c)=>{console.log(c)},$={labelCol:{span:7},wrapperCol:{span:15}},E=c=>{const l={...a};ae({data:l}).then(()=>{T.success("\u64CD\u4F5C\u6210\u529F"),g("updateData",l),b()})};X(f,(c,l,y)=>{f.value&&M()});const M=()=>{a.cd_key_count="1",a.cd_key_type="integral",a.cd_key_integral="",a.cd_key_validity_period="",a.cd_key_prefix="",a.cd_key_remarks=""};return(c,l)=>{const y=d("a-input-number"),p=d("a-form-item"),m=d("a-radio"),U=d("a-radio-group"),w=d("a-input"),v=d("a-divider"),x=d("a-button"),j=d("a-form");return D(),O(H,{modalVisible:F(f),isFooter:!1,onClose:b,title:"\u751F\u6210\u5361\u5BC6"},{content:t(()=>[e(j,Z({ref:"formRef",name:"custom-validation",model:a,rules:h},$,{onValidate:_,onFinishFailed:C,onFinish:E}),{default:t(()=>[e(p,{label:"\u751F\u6210\u6570\u91CF",name:"cd_key_count"},{default:t(()=>[e(y,{value:a.cd_key_count,"onUpdate:value":l[0]||(l[0]=o=>a.cd_key_count=o),style:{},min:"0"},null,8,["value"])]),_:1}),e(p,{label:"CD-KEY\u7C7B\u578B",name:"cd_key_type"},{default:t(()=>[e(U,{value:a.cd_key_type,"onUpdate:value":l[1]||(l[1]=o=>a.cd_key_type=o)},{default:t(()=>[e(m,{value:"integral",name:"type"},{default:t(()=>[ke]),_:1}),e(m,{value:"vip",name:"type"},{default:t(()=>[ge]),_:1})]),_:1},8,["value"])]),_:1}),e(p,{label:"CD-KEY\u79EF\u5206",name:"cd_key_integral"},{default:t(()=>[e(y,{value:a.cd_key_integral,"onUpdate:value":l[2]||(l[2]=o=>a.cd_key_integral=o),style:{},min:"0"},null,8,["value"])]),_:1}),e(p,{label:"CD-KEY\u6709\u6548\u671F",name:"cd_key_validity_period"},{default:t(()=>[e(U,{value:a.cd_key_validity_period,"onUpdate:value":l[3]||(l[3]=o=>a.cd_key_validity_period=o)},{default:t(()=>[e(m,{value:1,name:"type"},{default:t(()=>[be]),_:1}),e(m,{value:7,name:"type"},{default:t(()=>[he]),_:1}),e(m,{value:14,name:"type"},{default:t(()=>[Ce]),_:1}),e(m,{value:31,name:"type"},{default:t(()=>[xe]),_:1}),e(m,{value:92,name:"type"},{default:t(()=>[De]),_:1}),e(m,{value:183,name:"type"},{default:t(()=>[Se]),_:1}),e(m,{value:365,name:"type"},{default:t(()=>[we]),_:1})]),_:1},8,["value"])]),_:1}),e(p,{name:"cd_key_validity_period","wrapper-col":{span:15,offset:7}},{default:t(()=>[e(y,{value:a.cd_key_validity_period,"onUpdate:value":l[4]||(l[4]=o=>a.cd_key_validity_period=o),placeholder:"\u8BF7\u8F93\u5165CD-KEY\u6709\u6548\u671F",style:{},min:"0"},null,8,["value"])]),_:1}),e(p,{label:"CD-KEY\u524D\u7F00",name:"cd_key_prefix"},{default:t(()=>[e(w,{value:a.cd_key_prefix,"onUpdate:value":l[5]||(l[5]=o=>a.cd_key_prefix=o)},null,8,["value"])]),_:1}),e(p,{label:"CD-KEY\u6807\u8BC6",name:"cd_key_remarks"},{default:t(()=>[e(w,{value:a.cd_key_remarks,"onUpdate:value":l[6]||(l[6]=o=>a.cd_key_remarks=o)},null,8,["value"])]),_:1}),e(v),e(p,{"wrapper-col":{span:12,offset:12},class:"timed-start-button"},{default:t(()=>[e(x,{onClick:b},{default:t(()=>[Fe]),_:1}),e(x,{type:"primary",style:{"margin-left":"20px"},"html-type":"submit"},{default:t(()=>[Ue]),_:1})]),_:1})]),_:1},16,["model"])]),_:1},8,["modalVisible"])}}},Ie=s("\u751F\u6210\u5361\u5BC6 "),$e=s(" \u641C\u7D22 "),Ee=s("\u91CD\u7F6E "),Ae=s(" \u4E0B\u8F7D\u6A21\u677F "),Oe=s("\u542F\u7528"),Ve=s("\u7981\u7528"),Me=s("\u4FEE\u6539 "),je=s(" \u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F "),qe=s("\u5220\u9664 "),Ge={__name:"index",setup(V){const g=k({}),S=k(!1),f=k(!1),r=k({}),b=le.useForm,a=k(0),h=k(1),C=k(10);ne.PRESENTED_IMAGE_SIMPLE;const _=N({s:"",ctype:"vip"});k(!1);const{resetFields:$,validate:E,validateInfos:M}=b(_),c=oe(()=>({s:[{required:!_.ctype,trigger:"change",message:"\u8BF7\u8F93\u5165\u5173\u952E\u5B57"}]})),l=k([{value:"",label:"\u5168\u90E8"},{value:"integral",label:"\u79EF\u5206"},{value:"vip",label:"\u4F1A\u5458"}]),y=[{title:"ID",dataIndex:"ID",fixed:"left",width:120},{title:"\u5361\u5BC6\u663E\u793A",dataIndex:"CdKey",fixed:"left",width:200},{title:"\u7C7B\u578B",dataIndex:"CdKeyType",fixed:"left",width:200},{title:"\u79EF\u5206",dataIndex:"CdKeyIntegral",width:200},{title:"\u6709\u6548\u671F",dataIndex:"CdKeyValidityPeriod",width:200},{title:"\u6807\u8BC6",dataIndex:"CdKeyRemarks",width:200},{title:"\u72B6\u6001",dataIndex:"CdKeyState",customKey:"state",width:200},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"CreatedAt",width:280},{title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"UpdatedAt",width:280},{title:"\u64CD\u4F5C",dataIndex:"operation",customKey:"operation",fixed:"right",width:300}],p=k([]),m=o=>{f.value=!0,o?g.value={...o,title:"\u5361\u5BC6\u7F16\u8F91"}:g.value={title:"\u5361\u5BC6\u65B0\u589E"}},U=()=>{ie()},w=o=>{re({data:{id:[o.ID]}}).then(()=>{T.success("\u64CD\u4F5C\u6210\u529F!"),v(!0)})},v=o=>{o&&(h.value=1);let n=null,K={page:h.value},I=!1;r.value.ctype?r.value.s?(n=ue,K={s:r.value.s,ctype:r.value.ctype}):(I=!0,n=_e,K={ctype:r.value.ctype,page:h.value,quantity:C.value}):(n=ce,K={s:r.value.s}),n({data:_,splicingData:K}).then(A=>{I?a.value=A.page*C.value:a.value=0,p.value=(A.pageData||A||[]).map(u=>(u.CreatedAt&&(u.CreatedAt=L(u.CreatedAt)),u.UpdatedAt&&(u.UpdatedAt=L(u.UpdatedAt)),u))})};r.value=_;const x=()=>{$(),r.value=_,v(!0)},j=()=>{E().then(o=>{r.value=_,v(!0)}).catch(o=>{console.log("error",o)})};return(o,n)=>{const K=d("a-select"),I=d("a-form-item"),A=d("a-input"),u=d("a-button"),J=d("a-form"),Q=d("count-animation"),W=d("a-popconfirm");return D(),P(R,null,[e(Ke,{visible:S.value,"onUpdate:visible":n[0]||(n[0]=i=>S.value=i),onUpdateData:n[1]||(n[1]=i=>v(!0))},null,8,["visible"]),e(ve,{visible:f.value,"onUpdate:visible":n[2]||(n[2]=i=>f.value=i),onUpdateData:n[3]||(n[3]=i=>v(!0)),dataObj:g.value},null,8,["visible","dataObj"]),e(pe,{columns:y,pageSize:C.value,"onUpdate:pageSize":n[7]||(n[7]=i=>C.value=i),current:h.value,"onUpdate:current":n[8]||(n[8]=i=>h.value=i),total:a.value,"onUpdate:total":n[9]||(n[9]=i=>a.value=i),isTable:!0,isSearch:!0,onOnShowSizeChange:v,onInitData:v,dataSource:p.value},{search:t(()=>[e(J,{class:"flex flex-warp",rules:F(c),onFinish:j,model:_},{default:t(()=>[e(I,{label:"\u7C7B\u578B:",name:"ctype"},{default:t(()=>[e(K,{value:_.ctype,"onUpdate:value":n[4]||(n[4]=i=>_.ctype=i),placeholder:"\u8BF7\u9009\u62E9",style:{width:"200px"},options:l.value},null,8,["value","options"])]),_:1}),e(I,{label:"\u5173\u952E\u5B57:",name:"s"},{default:t(()=>[e(A,{value:_.s,"onUpdate:value":n[5]||(n[5]=i=>_.s=i),placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u5B57"},null,8,["value"])]),_:1}),e(I,null,{default:t(()=>[e(u,{type:"primary",onClick:n[6]||(n[6]=B(i=>S.value=!0,["stop"])),shape:"round"},{default:t(()=>[Ie]),_:1}),e(u,{type:"primary","html-type":"submit",style:{"margin-left":"10px"},class:"filter-search"},{default:t(()=>[e(F(se)),$e]),_:1}),e(u,{style:{"margin-left":"10px"},class:"filter-reset",onClick:x},{default:t(()=>[e(F(me)),Ee]),_:1}),e(u,{shape:"round",style:{"margin-left":"10px"},onClick:U},{default:t(()=>[e(F(de)),Ae]),_:1})]),_:1})]),_:1},8,["rules","model"])]),bodyCell:t(({text:i,record:q,index:Ye,column:Y})=>[Y.customKey==="state"?(D(),P(R,{key:0},[q.CdKeyState?(D(),O(u,{key:0,type:"link",primary:"",class:"state-button state-enable"},{default:t(()=>[Oe]),_:1})):(D(),O(u,{key:1,type:"link",danger:"",class:"state-button"},{default:t(()=>[Ve]),_:1}))],64)):z("",!0),Y.customKey==="money"?(D(),O(Q,{key:1,num:i},null,8,["num"])):z("",!0),Y.customKey==="operation"?(D(),P(R,{key:2},[e(u,{type:"primary",onClick:B(ee=>m(q),["stop"]),style:{"margin-left":"10px","margin-bottom":"10px"},shape:"round"},{default:t(()=>[Me]),_:2},1032,["onClick"]),e(W,{placement:"topLeft","ok-text":"\u662F","cancel-text":"\u5426",onConfirm:ee=>w(q)},{title:t(()=>[je]),default:t(()=>[e(u,{type:"danger",style:{"margin-left":"10px","margin-bottom":"10px"},shape:"round"},{default:t(()=>[qe]),_:1})]),_:2},1032,["onConfirm"])],64)):z("",!0)]),_:1},8,["pageSize","current","total","dataSource"])],64)}}};export{Ge as default};
